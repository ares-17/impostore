import{_ as y,u as C,I as c,c as r,o as i,j as a,J as n,n as k,e as d,G as M,H as x,b,t as U,g as T}from"./chunks/framework.rmZCRNbh.js";import{M as f,a as S,b as V,c as I,d as N,e as P}from"./chunks/theme.CQlYyuSb.js";import{g as B}from"./chunks/gameCode.B_tBZGK0.js";const A={name:"MaterialUserEdit",components:{MaterialTextInput:S,MaterialButton:f},props:{modelValue:{type:String,default:""},index:{type:Number,required:!0},deletable:{type:Boolean,default:!0}},emits:["update:modelValue","add-user"],setup(){const{isDark:t}=C();return{isDark:t}},data(){return{nickname:this.modelValue}},watch:{modelValue(t){this.nickname=t}},methods:{handleNicknameChange(t){this.$emit("update:modelValue",t)},addUser(){this.nickname.trim()&&(this.$emit("add-user",this.nickname.trim()),this.nickname="")}}},D={class:"user-edit-content w-full"},j={class:"flex flex-grow sm:flex-row sm:items-end gap-3 w-full items-center"},F={class:"flex-grow sm:w-auto"},G={class:"mt-2 sm:mt-0 sm:ml-2 flex-shrink-0"};function J(t,e,u,m,s,o){const p=c("MaterialTextInput"),h=c("MaterialButton");return i(),r("div",{class:k(["material-user-edit",{"dark-mode":m.isDark}])},[a("div",D,[a("div",j,[a("div",F,[n(p,{class:"flex-grow",modelValue:s.nickname,"onUpdate:modelValue":[e[0]||(e[0]=g=>s.nickname=g),o.handleNicknameChange],label:`Giocatore ${u.index+1}`,placeholder:"Inserisci nickname"},null,8,["modelValue","label","onUpdate:modelValue"])]),a("div",G,[n(h,{icon:"PLUS","color-scheme":"PRIMARY",size:"small",disabled:!s.nickname.trim(),onClick:o.addUser,class:"add-button"},null,8,["disabled","onClick"])])])])],2)}const O=y(A,[["render",J],["__scopeId","data-v-6eeb63d9"]]),q={name:"CreatePartyPage",components:{MaterialUserAvatar:P,MaterialAddUser:O,MaterialNumberInput:N,MaterialTextButton:I,MaterialToast:V,MaterialButton:f},setup(){const{isDark:t}=C();return{isDark:t,joinParty:()=>{window.location.href=T("/join-party")}}},data(){return{avatars:[],newUser:"",impostorsCount:1,showSuccessToast:!1,toastMessage:"",toastType:"success",gameCode:null}},computed:{maxImpostors(){return Math.max(1,this.avatars.length-1)},isFormValid(){return this.avatars.length>=3&&this.impostorsCount>=1&&this.impostorsCount<this.avatars.length}},mounted(){this.loadFromStorage()},methods:{addNewUser(){this.newUser.trim()&&(this.avatars.push(this.newUser.trim()),this.newUser="",this.saveToStorage())},removeUser(t){this.avatars.splice(t,1),this.saveToStorage(),this.impostorsCount>=this.avatars.length&&(this.impostorsCount=Math.max(1,this.avatars.length-1))},async createParty(){if(this.isFormValid)try{const{code:t,config:e}=B(this.avatars,this.impostorsCount,`Partita del ${new Date().toLocaleDateString()}`);sessionStorage.setItem("currentParty",JSON.stringify(e)),sessionStorage.setItem("currentGameCode",JSON.stringify(t)),this.gameCode=t,this.toastMessage="Partita creata con successo!",this.toastType="success",this.showSuccessToast=!0}catch(t){this.toastMessage=`Errore: ${t.message}`,this.toastType="error",this.showSuccessToast=!0}},async copyGameCode(){try{await navigator.clipboard.writeText(this.gameCode),this.toastMessage="Codice copiato negli appunti!",this.toastType="success",this.showSuccessToast=!0}catch{this.toastMessage="Impossibile copiare il codice",this.toastType="error",this.showSuccessToast=!0}},saveToStorage(){sessionStorage.setItem("savedNicknames",JSON.stringify(this.avatars))},loadFromStorage(){try{const t=sessionStorage.getItem("savedNicknames");if(t){const e=JSON.parse(t);e.length>0&&(this.avatars=e)}}catch(t){console.error("Errore nel caricamento dei nicknames:",t)}}}},z={class:"page-container"},E={class:"avatars-grid"},L={key:0,class:"add-user-section"},R={key:0},H={key:1,class:"create-button-section"},Y={key:2,class:"game-code-section"},K={class:"code-container"},Q={class:"game-code"},W={class:"copy-button-section"},X={key:0,class:"join-party"};function Z(t,e,u,m,s,o){const p=c("MaterialUserAvatar"),h=c("MaterialAddUser"),g=c("MaterialNumberInput"),v=c("MaterialTextButton"),w=c("MaterialToast");return i(),r("div",{class:k(["create-party-page",{"dark-mode":m.isDark}])},[a("div",z,[e[7]||(e[7]=a("h1",{class:"page-title"},"Crea Nuova Partita ðŸŽ‰",-1)),e[8]||(e[8]=a("div",{class:"mt-4"},[a("span",null,"Vuoi iniziare una nuova partita? ðŸŽ² In questa pagina puoi generare un codice unico da condividere con i tuoi amici. Copia il codice e invialo agli altri giocatori: chiunque lo inserirÃ  potrÃ  unirsi alla tua partita.")],-1)),a("div",null,[e[3]||(e[3]=a("h2",{class:"section-title"},"Giocatori",-1)),a("div",E,[(i(!0),r(M,null,x(s.avatars,(l,_)=>(i(),b(p,{key:_,nickname:l,size:60,clickable:!0,deletable:!s.gameCode,onDelete:te=>o.removeUser(_)},null,8,["nickname","deletable","onDelete"]))),128))]),s.gameCode?d("",!0):(i(),r("div",L,[n(h,{modelValue:s.newUser,"onUpdate:modelValue":e[0]||(e[0]=l=>s.newUser=l),index:s.avatars.length,deletable:!1,onAddUser:o.addNewUser},null,8,["modelValue","index","onAddUser"])]))]),s.gameCode?d("",!0):(i(),r("div",R,[e[4]||(e[4]=a("h2",{class:"section-title"},"Impostori",-1)),n(g,{modelValue:s.impostorsCount,"onUpdate:modelValue":e[1]||(e[1]=l=>s.impostorsCount=l),label:"Numero di impostori",placeholder:"Inserisci numero impostori",max:o.maxImpostors,min:1,step:1},null,8,["modelValue","max"])])),s.gameCode?d("",!0):(i(),r("div",H,[n(v,{text:"Crea Partita ðŸŽ®","color-scheme":"primary",disabled:!o.isFormValid,onClick:o.createParty},null,8,["disabled","onClick"])])),s.gameCode?(i(),r("div",Y,[e[5]||(e[5]=a("h3",null,"Codice Partita",-1)),a("div",K,[a("code",Q,U(s.gameCode),1)]),a("div",W,[n(v,{text:"Copia Codice negli Appunti","color-scheme":"outline",onClick:o.copyGameCode},null,8,["onClick"])]),e[6]||(e[6]=a("p",{class:"hint"},"Condividi questo codice con i giocatori per farli unire alla partita",-1))])):d("",!0)]),s.gameCode?(i(),r("div",X,[n(v,{text:"Accedi al party ðŸŽ®","color-scheme":"primary",disabled:!o.isFormValid,onClick:m.joinParty},null,8,["disabled","onClick"])])):d("",!0),n(w,{show:s.showSuccessToast,"onUpdate:show":e[2]||(e[2]=l=>s.showSuccessToast=l),message:s.toastMessage,type:s.toastType},null,8,["show","message","type"])],2)}const $=y(q,[["render",Z],["__scopeId","data-v-53213763"]]),ie=JSON.parse('{"title":"","description":"","frontmatter":{"prev":false,"next":false},"headers":[],"relativePath":"create-party.md","filePath":"create-party.md"}'),ee={name:"create-party.md"},re=Object.assign(ee,{setup(t){return(e,u)=>(i(),r("div",null,[n($)]))}});export{ie as __pageData,re as default};
