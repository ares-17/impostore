import{_ as f,I as r,c as i,o as n,j as t,e as T,J as l,w as y,n as p,G as m,a as u,t as k,u as P}from"./chunks/framework.rmZCRNbh.js";import{b as V,g as b,c as x,h as R,a as C}from"./chunks/theme.D2LepF1f.js";import{d as I}from"./chunks/gameCode.B_tBZGK0.js";const D={name:"ViewWordPage",components:{MaterialTextInput:C,MaterialDropdownFilled:R,MaterialTextButton:x,MaterialModal:b,MaterialToast:V},setup(){const{isDark:o}=P();return{isDark:o}},data(){return{gameToken:"",selectedPlayer:"",players:[],impostors:[],parola:"",showRevealModal:!1,roleVisible:!1,showToast:!1,toastMessage:"",toastType:"success",playerRevealed:!1}},mounted(){const s=new URLSearchParams(window.location.search).get("token");s&&(this.gameToken=s)},methods:{loadGame(){try{const o=I(this.gameToken);this.players=o.giocatori,this.impostors=o.impostori,this.parola=o.parola,this.showToastMessage("Partita caricata correttamente!","success")}catch(o){this.showToastMessage(`Errore: ${o.message}`,"error")}},isImpostor(o){return this.impostors.includes(o)},revealRole(){this.selectedPlayer&&(this.roleVisible=!1,this.showRevealModal=!0,this.$nextTick(()=>{setTimeout(()=>{this.roleVisible=!0},50)}))},closeRevealModal(){this.showRevealModal=!1,this.roleVisible=!1,this.playerRevealed=!0},showToastMessage(o,s="success"){this.toastMessage=o,this.toastType=s,this.showToast=!0}}},B={class:"page-container"},S={class:"token-section"},U={key:0,class:"select-section"},z={class:"reveal-content"};function N(o,s,h,w,e,c){const g=r("MaterialTextInput"),d=r("MaterialTextButton"),M=r("MaterialDropdownFilled"),v=r("MaterialModal"),_=r("MaterialToast");return n(),i("div",{class:p(["view-word-page",{"dark-mode":w.isDark}])},[t("div",B,[s[4]||(s[4]=t("h1",{class:"page-title"},"Visualizza la Parola 🔍",-1)),s[5]||(s[5]=t("div",{class:"mt-4"},[t("span",null,"Hai ricevuto un codice? 🔑 Inseriscilo qui, scegli il tuo nickname, e potrai entrare nella stanza con gli altri giocatori. In pochi secondi sarai pronto a giocare insieme a loro!")],-1)),t("div",S,[l(g,{modelValue:e.gameToken,"onUpdate:modelValue":s[0]||(s[0]=a=>e.gameToken=a),label:"Inserisci il tuo token",placeholder:"IMPO1_..."},null,8,["modelValue"]),l(d,{text:"Carica Partita","color-scheme":"primary",disabled:!e.gameToken,onClick:c.loadGame},null,8,["disabled","onClick"])]),e.players.length>0?(n(),i("div",U,[l(M,{modelValue:e.selectedPlayer,"onUpdate:modelValue":s[1]||(s[1]=a=>e.selectedPlayer=a),options:e.players.map(a=>({label:a,value:a})),label:"Seleziona il tuo nickname",placeholder:"Scegli il tuo nome",disabled:e.playerRevealed},null,8,["modelValue","options","disabled"]),l(d,{text:"Mostra la Parola","color-scheme":"primary",disabled:!e.selectedPlayer||e.playerRevealed,onClick:c.revealRole},null,8,["disabled","onClick"])])):T("",!0),l(v,{show:e.showRevealModal,"onUpdate:show":s[2]||(s[2]=a=>e.showRevealModal=a),title:`Ruolo di ${e.selectedPlayer}`,onConfirm:c.closeRevealModal,"show-cancel":!1},{default:y(()=>[t("div",z,[t("div",{class:p(["role-text",{show:e.roleVisible}])},[c.isImpostor(e.selectedPlayer)?(n(),i(m,{key:0},[u(" IMPOSTORE 👀 ")],64)):(n(),i(m,{key:1},[u(k(e.parola.toUpperCase()),1)],64))],2)])]),_:1},8,["show","title","onConfirm"]),l(_,{show:e.showToast,"onUpdate:show":s[3]||(s[3]=a=>e.showToast=a),message:e.toastMessage,type:e.toastType},null,8,["show","message","type"])])],2)}const O=f(D,[["render",N],["__scopeId","data-v-d8fb0ac7"]]),J=JSON.parse('{"title":"","description":"","frontmatter":{"prev":false,"next":false},"headers":[],"relativePath":"view-word.md","filePath":"view-word.md"}'),F={name:"view-word.md"},W=Object.assign(F,{setup(o){return(s,h)=>(n(),i("div",null,[l(O)]))}});export{J as __pageData,W as default};
